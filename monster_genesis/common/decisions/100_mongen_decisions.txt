##########################################################################
# Decisions for Monster Genesis
#
# Written by TzverG
##########################################################################

@MEGrazingInfluenceCost = 50
@MELastFrontierInfluenceCost = 200
@MEGrazingEnergyCost = 500
@MELastFrontierEnergyCost = 2000
@METiyankyGenesisInfluenceCost = 200
@METiyankyGenesisEnergyCost = 2000
@METiyankyGenesisFoodCost = 3000
@MERemoveRadiationMark = 90

@MELastFrontierPrepareToEmitInDays = 90
@METiyankyGenesisTimerInDays = 1000

#@METiyankyGenesisInfluenceCost = 50
#@METiyankyGenesisEnergyCost = 100
#@METiyankyGenesisFoodCost = 100
#@METiyankyGenesisTimerInDays = 30

# this decision turns a gas giant planet into candidate of grazing field
uncolonized_decision_mongen_set_flag = {
	owned_planets_only = no
	enactment_time = 0
	
	icon = grazing_field_mongen

	resources = {
		category = decisions
		cost = {
			energy = @MEGrazingEnergyCost
			influence = @MEGrazingInfluenceCost
		}
	}
	
	prerequisites = {
		"tech_tiyanki_comm"
	}
	
	ai_weight = {
		weight = 0
	}

	potential = {
		# you would better make this strict enough or this can literally appear on every planet
		is_planet_class = pc_gas_giant
		NOT = { has_modifier = grazing_candidate }
	}

	effect = {
		add_modifier = {
			modifier = grazing_candidate
			days = -1 
		} 
	}
}

# this decision turns off a grazing field planet
uncolonized_decision_mongen_remove_flag = {
	owned_planets_only = no
	enactment_time = 0
	
	icon = grazing_field_mongen

	resources = {
		category = decisions
		cost = {
			energy = @MERemoveRadiationMark
			influence = @MEGrazingInfluenceCost
		}
	}
	
	prerequisites = {
		"tech_tiyanki_comm"
	}
	
	ai_weight = {
		weight = 0
	}

	potential = {
		# you would better make this strict enough or this can literally appear on every planet
		is_planet_class = pc_gas_giant
		has_modifier = grazing_candidate
	}
	
	effect = {
		remove_modifier = grazing_candidate
	}
}

mongen_last_frontier_set_flag = {

	owned_planets_only = yes
	enactment_time = @MELastFrontierPrepareToEmitInDays
	
	icon = last_frontier_mongen
	
	resources = {
		category = decisions
		cost = {
			energy = @MELastFrontierEnergyCost
			influence = @MELastFrontierInfluenceCost
		}
	}
	
	prerequisites = {
		"tech_tiyanki_order"
	}
	
	ai_weight = {
		weight = 0
	}
	
	potential = {
		is_colony = yes
		NOT = { has_modifier = the_last_frontier }
	}
	
	allow = {
		count_owned_pop = {
			limit = { has_job = mongen_student }
			count >= 1
		}
	}
	
	effect = {
		add_modifier = {
			modifier = the_last_frontier
			days = -1 
		} 
	}
}

mongen_last_frontier_remove_flag = {

	owned_planets_only = yes
	enactment_time = @MELastFrontierPrepareToEmitInDays
	
	icon = last_frontier_mongen
	
	resources = {
		category = decisions
		cost = {
			energy = @MERemoveRadiationMark
			influence = @MELastFrontierInfluenceCost
		}
	}
	
	prerequisites = {
		"tech_tiyanki_order"
	}
	
	ai_weight = {
		weight = 0
	}
	
	potential = {
		is_colony = yes
		has_modifier = the_last_frontier
	}
	
	allow = {
		count_owned_pop = {
			limit = { has_job = mongen_student }
			count >= 1
		}
	}
	
	effect = {
		remove_modifier = the_last_frontier
	}
}

mongen_tiyanky_genesis = {

	owned_planets_only = yes
	enactment_time = @METiyankyGenesisTimerInDays
	
	icon = tiyanki_genesis_mongen
	
	resources = {
		category = decisions
		cost = {
			influence = @METiyankyGenesisInfluenceCost
			energy = @METiyankyGenesisEnergyCost
			food = @METiyankyGenesisFoodCost
		}
	}
	
	prerequisites = {
		"tech_ark_of_genesis"
	}
	
	ai_weight = {
		weight = 0
	}
	
	potential = {
		is_colony = yes
	}
	
	allow = {
		count_owned_pop = {
			limit = { has_job = mongen_student }
			count >= 1
		}
	}
	
	effect = {
		save_event_target_as = new_spawn_location
		if = {
			limit = {
				exists = owner
			}
			owner = {
				country_event = { id = monster_genesis.3 }
			}
		}
	}
}